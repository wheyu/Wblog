async function openTools(e){e.preventDefault();document.getElementById("tools-modal").style.display="block";try{const e=await fetch("tools/index.json"),t=await e.json();document.getElementById("tools-list").innerHTML=t.map(e=>`\n      <a href="tools/${e.file}" target="_blank">\n        <strong>${e.name}</strong>\n        <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 0.3rem;">\n          ${e.description}\n        </div>\n      </a>\n    `).join("")}catch(e){console.error("加载工具列表失败:",e)}}function closeTools(){document.getElementById("tools-modal").style.display="none"}function openCategoryModal(){const e=document.getElementById("category-modal"),t=document.getElementById("category-modal-list"),o=document.querySelector(".sidebar .category-list");o&&(t.innerHTML=o.innerHTML),e.style.display="block"}function closeCategoryModal(){document.getElementById("category-modal").style.display="none"}function initBackButton(){const e=document.querySelector(".back-button-float");e&&e.addEventListener("click",e=>{e.preventDefault(),window.history.length>1&&document.referrer?window.history.back():window.location.href="index.html"})}window.onclick=function(e){const t=document.getElementById("tools-modal"),o=document.getElementById("category-modal");e.target===t&&closeTools(),e.target===o&&closeCategoryModal()},document.addEventListener("keydown",function(e){"Escape"===e.key&&(closeTools(),closeCategoryModal())}),document.addEventListener("DOMContentLoaded",initBackButton),window.addEventListener("spa:pageload",initBackButton);